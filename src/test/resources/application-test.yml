# Database connection pool configuration for tests
spring:
  datasource:
    hikari:
      maximum-pool-size: 20
      minimum-idle: 5
      max-lifetime: 1800000  # 30 min in ms
      idle-timeout: 300000   # 5 min
      connection-timeout: 30000  # 30 sec
      leak-detection-threshold: 60000  # 60 sec
      connection-test-query: SELECT 1

test:
  selenium:
    container:
      # Resource allocation - can be overridden via system properties
      maxContainers: 2  # Conservative default, system will calculate if not set
      memoryLimitMb: 2048  # Increased from 1024MB to 2GB for better stability
      cpuQuota: 100000  # 2 full CPU cores (increased from 1)
      sharedMemoryBytes: 2147483648  # 2GB (increased from 1GB)
      startupTimeoutSeconds: 600  # 10 minutes (increased from 5)
      maxStartupRetries: 2  # Allow 2 retries instead of fail-fast
      retryDelayMs: 5000  # 5 second delay between retries
    
    timeouts:
      # WebDriver timeouts in seconds
      pageLoadTimeoutSeconds: 45
      scriptTimeoutSeconds: 30
      implicitWaitSeconds: 15
      pageObjectWaitSeconds: 45
    
    applicationReadiness:
      # Application startup checking
      enabled: true
      maxWaitTimeSeconds: 60
      pollIntervalMs: 1000
      httpTimeoutSeconds: 3

# Logging configuration for tests
logging:
  level:
    id.ac.tazkia.minibank.config.ParallelSeleniumManager: INFO
    id.ac.tazkia.minibank.config.ApplicationReadinessService: INFO
    id.ac.tazkia.minibank.functional.web: INFO